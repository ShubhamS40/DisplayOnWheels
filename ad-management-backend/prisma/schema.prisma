generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model DriverRegistration {
  id                   String             @id @default(uuid())
  fullName             String
  email                String             @unique
  contactNumber        String
  vehicleType          DriverVehicleType
  vehicleNumber        String
  password             String
  acceptedTerms        Boolean
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt

  passwordResetToken   String?            
  passwordResetExpires DateTime? 

  otp                  String?            // üîê OTP for email verification
  otpExpires           DateTime?          // üïí Expiration time for OTP
  isEmailVerified      Boolean            @default(false)

  // üìÑ Relation to documents
  documents            DriverDocuments?
}

model DriverDocuments {
  id                String   @id @default(uuid())
  driverId          String   @unique
  photoUrl          String
  idCardUrl         String
  drivingLicenseUrl String
  vehicleImageUrl   String
  bankProofUrl      String
  branchName        String
  bankName          String
  ifscCode          String
  accountNumber     String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // üîó Foreign key relation
  driver            DriverRegistration @relation(fields: [driverId], references: [id], onDelete: Cascade)
}

enum DriverVehicleType {
  Hatchback
  SUV
  Sedan
  Compact
  Convertible
  Coupe
  Crossover
  Minivan
  Autorickshaw
  Pickup_Truck
  Van
  Wagon
  Other
}
